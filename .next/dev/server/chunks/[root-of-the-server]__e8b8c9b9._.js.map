{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/OneDrive%20-%20Alliance%20University/Desktop/git/v0-sql-connected-website/app/api/videos/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\"\r\nimport { neon } from \"@neondatabase/serverless\"\r\n\r\nconst sql = neon(process.env.DATABASE_URL as string)\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const { searchParams } = new URL(request.url)\r\n    const genre = searchParams.get(\"genre\")\r\n    const limitParam = searchParams.get(\"limit\")\r\n    const limit = limitParam ? Number(limitParam) : 50\r\n\r\n    let rows\r\n\r\n    if (genre) {\r\n      // üîÅ USE videos (NOT movies)\r\n      rows = await sql`\r\n        SELECT id, title, description, genre, thumbnail_url, rating, view_count, created_at\r\n        FROM videos\r\n        WHERE genre = ${genre}\r\n        ORDER BY created_at DESC\r\n        LIMIT ${limit}\r\n      `\r\n    } else {\r\n      // üîÅ USE videos (NOT movies)\r\n      rows = await sql`\r\n        SELECT id, title, description, genre, thumbnail_url, rating, view_count, created_at\r\n        FROM videos\r\n        ORDER BY created_at DESC\r\n        LIMIT ${limit}\r\n      `\r\n    }\r\n\r\n    return NextResponse.json(rows)\r\n  } catch (error) {\r\n    console.error(\"API Error:\", error)\r\n    return NextResponse.json({ error: \"Failed to fetch videos\" }, { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,MAAM,IAAA,gKAAI,EAAC,QAAQ,GAAG,CAAC,YAAY;AAElC,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,QAAQ,aAAa,GAAG,CAAC;QAC/B,MAAM,aAAa,aAAa,GAAG,CAAC;QACpC,MAAM,QAAQ,aAAa,OAAO,cAAc;QAEhD,IAAI;QAEJ,IAAI,OAAO;YACT,6BAA6B;YAC7B,OAAO,MAAM,GAAG,CAAC;;;sBAGD,EAAE,MAAM;;cAEhB,EAAE,MAAM;MAChB,CAAC;QACH,OAAO;YACL,6BAA6B;YAC7B,OAAO,MAAM,GAAG,CAAC;;;;cAIT,EAAE,MAAM;MAChB,CAAC;QACH;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,cAAc;QAC5B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAyB,GAAG;YAAE,QAAQ;QAAI;IAC9E;AACF"}}]
}