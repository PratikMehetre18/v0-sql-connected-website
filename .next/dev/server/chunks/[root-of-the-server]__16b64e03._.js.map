{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/OneDrive%20-%20Alliance%20University/Desktop/git/v0-sql-connected-website/lib/db.ts"],"sourcesContent":["import { neon } from \"@neondatabase/serverless\"\r\n\r\nconst sql = neon(process.env.DATABASE_URL!)\r\n\r\nexport async function query(text: string, params?: any[]) {\r\n  try {\r\n    const result = await sql.query(text, params)\r\n    return result || []\r\n  } catch (error) {\r\n    console.error(\"Database query error:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport async function getVideos(limit = 20, offset = 0) {\r\n  return query(`SELECT * FROM videos ORDER BY created_at DESC LIMIT $1 OFFSET $2`, [limit, offset])\r\n}\r\n\r\nexport async function getVideoById(id: number) {\r\n  const result = await query(`SELECT * FROM videos WHERE id = $1`, [id])\r\n  return result[0] || null\r\n}\r\n\r\nexport async function getVideosByGenre(genre: string, limit = 10) {\r\n  return query(`SELECT * FROM videos WHERE genre = $1 ORDER BY rating DESC LIMIT $2`, [genre, limit])\r\n}\r\n\r\nexport async function getTrendingVideos(limit = 10) {\r\n  return query(`SELECT * FROM videos ORDER BY view_count DESC, rating DESC LIMIT $1`, [limit])\r\n}\r\n\r\nexport async function getUserWatchlist(userId: number) {\r\n  return query(\r\n    `SELECT v.* FROM videos v\r\n     INNER JOIN watchlist w ON v.id = w.video_id\r\n     WHERE w.user_id = $1\r\n     ORDER BY w.added_at DESC`,\r\n    [userId],\r\n  )\r\n}\r\n\r\nexport async function addToWatchlist(userId: number, videoId: number) {\r\n  try {\r\n    return await query(\r\n      `INSERT INTO watchlist (user_id, video_id) VALUES ($1, $2)\r\n       ON CONFLICT DO NOTHING`,\r\n      [userId, videoId],\r\n    )\r\n  } catch (error) {\r\n    console.error(\"Error adding to watchlist:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport async function removeFromWatchlist(userId: number, videoId: number) {\r\n  return query(`DELETE FROM watchlist WHERE user_id = $1 AND video_id = $2`, [userId, videoId])\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;AAEA,MAAM,MAAM,IAAA,gKAAI,EAAC,QAAQ,GAAG,CAAC,YAAY;AAElC,eAAe,MAAM,IAAY,EAAE,MAAc;IACtD,IAAI;QACF,MAAM,SAAS,MAAM,IAAI,KAAK,CAAC,MAAM;QACrC,OAAO,UAAU,EAAE;IACrB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM;IACR;AACF;AAEO,eAAe,UAAU,QAAQ,EAAE,EAAE,SAAS,CAAC;IACpD,OAAO,MAAM,CAAC,gEAAgE,CAAC,EAAE;QAAC;QAAO;KAAO;AAClG;AAEO,eAAe,aAAa,EAAU;IAC3C,MAAM,SAAS,MAAM,MAAM,CAAC,kCAAkC,CAAC,EAAE;QAAC;KAAG;IACrE,OAAO,MAAM,CAAC,EAAE,IAAI;AACtB;AAEO,eAAe,iBAAiB,KAAa,EAAE,QAAQ,EAAE;IAC9D,OAAO,MAAM,CAAC,mEAAmE,CAAC,EAAE;QAAC;QAAO;KAAM;AACpG;AAEO,eAAe,kBAAkB,QAAQ,EAAE;IAChD,OAAO,MAAM,CAAC,mEAAmE,CAAC,EAAE;QAAC;KAAM;AAC7F;AAEO,eAAe,iBAAiB,MAAc;IACnD,OAAO,MACL,CAAC;;;6BAGwB,CAAC,EAC1B;QAAC;KAAO;AAEZ;AAEO,eAAe,eAAe,MAAc,EAAE,OAAe;IAClE,IAAI;QACF,OAAO,MAAM,MACX,CAAC;6BACsB,CAAC,EACxB;YAAC;YAAQ;SAAQ;IAErB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,MAAM;IACR;AACF;AAEO,eAAe,oBAAoB,MAAc,EAAE,OAAe;IACvE,OAAO,MAAM,CAAC,0DAA0D,CAAC,EAAE;QAAC;QAAQ;KAAQ;AAC9F"}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/OneDrive%20-%20Alliance%20University/Desktop/git/v0-sql-connected-website/app/api/trending/route.ts"],"sourcesContent":["import { query } from \"@/lib/db\"\r\nimport { NextResponse } from \"next/server\"\r\n\r\nexport async function GET() {\r\n  try {\r\n    const videos = await query(`SELECT * FROM videos ORDER BY view_count DESC, rating DESC LIMIT 10`)\r\n    return NextResponse.json(videos)\r\n  } catch (error) {\r\n    console.error(\"API Error:\", error)\r\n    return NextResponse.json({ error: \"Failed to fetch trending videos\" }, { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,SAAS,MAAM,IAAA,oHAAK,EAAC,CAAC,mEAAmE,CAAC;QAChG,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,cAAc;QAC5B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAkC,GAAG;YAAE,QAAQ;QAAI;IACvF;AACF"}}]
}